# Qniverse - Конструктор Опитувальників

**Qniverse** - це веб-додаток, що дозволяє користувачам створювати власні опитувальники (тести) з різними типами питань: текстові відповіді, одиночний вибір та множинний вибір. Після створення опитувальники зберігаються в базі даних, їх можна запускати для проходження, редагувати та видаляти.

## Технології

Проєкт Qniverse розроблений з використанням наступних технологій:

**Frontend:**

*   **HTML:**  Для структури веб-сторінок.
*   **CSS:**  Для стилізації інтерфейсу користувача.
*   **JavaScript:**  Для інтерактивності та динамічної логіки на стороні клієнта.
*   **htmx:**  Для покращення інтерактивності та роботи з сервером (хоча в даній версії htmx не використовується активно).

**Backend:**

*   **Node.js:**  Серверне середовище виконання JavaScript.
*   **Express:**  Фреймворк для Node.js для створення веб-застосунків та API.
*   **PostgreSQL:**  Реляційна база даних для зберігання опитувальників та відповідей користувачів.
*   **pg (node-postgres):**  Node.js драйвер для підключення до PostgreSQL.

## Інструкція по запуску

Щоб запустити проєкт Qniverse на своєму локальному комп'ютері, виконайте наступні кроки:

### Передумови

Перед початком переконайтеся, що на вашому комп'ютері встановлено наступне програмне забезпечення:

*   **Node.js** (з npm - менеджером пакетів Node.js) - [Завантажити Node.js](https://nodejs.org/)
*   **PostgreSQL** - [Завантажити PostgreSQL](https://www.postgresql.org/download/)
*   **pgAdmin** (опціонально, але рекомендовано) - [Завантажити pgAdmin](https://www.pgadmin.org/download/) - графічний інтерфейс для управління PostgreSQL.

### Встановлення

1.  **Клонуйте репозиторій Qniverse з GitHub:**

    ```bash
    git clone <адреса_твого_репозиторію>
    cd Qniverse
    ```

2.  **Перейдіть до папки `backend` та встановіть backend залежності:**

    ```bash
    cd backend
    npm install
    ```

3.  **Створіть базу даних PostgreSQL `questionnaire_db`:**

    *   Запустіть pgAdmin (або використовуйте командний рядок `psql`).
    *   Створіть нову базу даних з назвою `questionnaire_db`.

4.  **Створіть таблиці в базі даних `questionnaire_db`:**

    *   Відкрийте Query Tool для бази даних `questionnaire_db` в pgAdmin (або використовуйте `psql`).
    *   Виконайте SQL код для створення таблиць (скопіюйте та вставте наступний код у Query Tool та виконайте):

    ```sql
    CREATE TABLE questionnaires (
        id SERIAL PRIMARY KEY,
        title VARCHAR(255) NOT NULL,
        description TEXT
    );

    CREATE TABLE questions (
        id SERIAL PRIMARY KEY,
        questionnaire_id INTEGER REFERENCES questionnaires(id) ON DELETE CASCADE,
        text TEXT NOT NULL,
        type VARCHAR(50) NOT NULL -- 'text', 'single-choice', 'multiple-choice'
    );

    CREATE TABLE answers (
        id SERIAL PRIMARY KEY,
        question_id INTEGER REFERENCES questions(id),
        text TEXT NOT NULL
    );

    CREATE TABLE correct_answers (
        id SERIAL PRIMARY KEY,
        question_id INTEGER REFERENCES questions(id) ON DELETE CASCADE,
        text TEXT NOT NULL
    );

    CREATE TABLE user_responses (
        id SERIAL PRIMARY KEY,
        questionnaire_id INTEGER REFERENCES questionnaires(id),
        question_id INTEGER REFERENCES questions(id),
        user_answer TEXT,
        completion_time TIMESTAMP -- Додамо поле для часу завершення опитування
    );
    ```

5.  **Налаштуйте підключення до бази даних у файлі `backend/server.js`:**

    *   Відкрийте файл `backend/server.js` у текстовому редакторі.
    *   Знайдіть блок коду конфігурації `Pool` (підключення до PostgreSQL):

    ```javascript
    const pool = new Pool({
        user: 'postgres', // Замініть на свого користувача PostgreSQL, якщо потрібно
        host: 'localhost',
        database: 'questionnaire_db', // Назва твоєї бази даних
        password: 'your_password', // Замініть на свій пароль postgres
        port: 5432,
    });
    ```

    *   **Замініть значення `user`, `password`, та `database` на свої власні налаштування PostgreSQL**, якщо вони відрізняються від стандартних.  **Особливо важливо правильно вказати пароль, який ви задали для користувача `postgres` (або іншого користувача PostgreSQL).**

### Запуск застосунку

1.  **Запустіть backend сервер:**

    *   Відкрийте командний рядок або термінал.
    *   Перейдіть до папки `backend`: `cd Qniverse/backend`.
    *   Запустіть сервер командою: `node server.js`.
    *   Ви повинні побачити повідомлення в консолі: `Backend server listening at http://localhost:3000`.

2.  **Відкрийте frontend в браузері:**

    *   Відкрийте свій веб-браузер (наприклад, Chrome, Firefox, Safari).
    *   Введіть в адресний рядок шлях до файлу `index.html` на вашому комп'ютері.  **Найпростіший спосіб - відкрити файл `index.html` безпосередньо через браузер:**
        *   Знайдіть файл `index.html` в папці `Qniverse` через файловий менеджер.
        *   Перетягніть файл `index.html` у вікно браузера або клікніть правою кнопкою миші на файлі `index.html` та виберіть "Відкрити за допомогою" і виберіть свій браузер.

    *   Головна сторінка Qniverse повинна відкритися у браузері.

## Використання

**Створення опитувальника:**

1.  На головній сторінці натисніть кнопку "Створити новий опитувальник".
2.  На сторінці "Створити Опитувальник" введіть назву та опис опитувальника.
3.  Додавайте питання, натискаючи кнопку "Додати питання".
4.  Для кожного питання:
    *   Введіть текст питання.
    *   Виберіть тип питання (Текст, Одиночний вибір, Множинний вибір).
    *   Для питань з вибором варіантів:
        *   Додавайте варіанти відповідей, натискаючи "Додати варіант".
        *   Позначте правильні варіанти відповідей, використовуючи радіо кнопки (для одиночного вибору) або чекбокси (для множинного вибору) "Правильна відповідь:".
    *   Для текстових питань:
        *   Введіть правильну відповідь у полі "Правильна відповідь:".
5.  Натисніть кнопку "Зберегти Опитувальник", щоб зберегти створений опитувальник в базі даних.

**Перегляд та проходження опитувальників:**

*   На головній сторінці відображається список створених опитувальників.
*   **Run:** Натисніть "Run" у випадаючому меню біля опитувальника, щоб пройти опитування. Пройдіть питання, відповідаючи на них, і натисніть "Завершити опитування" на останньому питанні, щоб побачити результати.
*   **Edit:** Натисніть "Edit" у випадаючому меню, щоб відредагувати існуючий опитувальник.
*   **Delete:** Натисніть "Delete" у випадаючому меню, щоб видалити опитувальник (потрібно буде підтвердити видалення).

**Дякую за використання Qniverse!**
